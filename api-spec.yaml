openapi: 3.0.0
info:
  title: All my rest api
  description: Rest API for experiment.
  version: 0.1.1
servers:
  - url: https://example.com/myreport
    description: My report end point.
paths:
  /warehouses:
    get:
      summary: Get all warehouse.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Warehouse'
        '400':
          $ref: '#/components/responses/400Error'
  /warehouse:
    post:
      summary: Lets a user post a new warehouse
      requestBody:
        $ref: '#/components/requestBodies/Warehouse'
      responses:
        '200':
          description: Successfully created a new artist
          content:
            application/json:
              schema:
                  $ref: '#/components/schemas/Warehouse'

        '400':
          $ref: '#/components/responses/400Error'
  /warehouse/{id}:
    parameters:
          - name: id
            in: path
            required: true
            description: The ID of the warehouse
            schema:
              type: string
            example: 'WAR220203902'
    get:
      summary: Get warehouse by id.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                  $ref: '#/components/schemas/Warehouse'
        '400':
          $ref: '#/components/responses/400Error'
    put:
      summary: Update warehouse by id
      requestBody:
        $ref: '#/components/requestBodies/Warehouse'
      responses:
        '200':
          $ref: '#/components/responses/200Success'

        '400':
          $ref: '#/components/responses/400Error'
  /supervisors:
    get:
      summary: Get all supervisor.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Supervisor'
        '400':
          $ref: '#/components/responses/400Error'
  /supervisor:
    post:
      summary: Lets a user post a new supervisor
      requestBody:
        $ref: '#/components/requestBodies/Supervisor'
      responses:
        '200':
          description: Successfully created a new artist
          content:
            application/json:
              schema:
                  $ref: '#/components/schemas/Supervisor'

        '400':
          $ref: '#/components/responses/400Error'
  /supervisor/{id}:
    parameters:
        - name: id
          in: path
          required: true
          description: The ID of the supervisor
          schema:
            type: string
          example: 'SUP20220239'
    get:
      summary: Get supervisor by id.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                  $ref: '#/components/schemas/Supervisor'
        '400':
          $ref: '#/components/responses/400Error'
    put:
      summary: Update supervisor by id
      requestBody:
        $ref: '#/components/requestBodies/Supervisor'
      responses:
        '200':
          $ref: '#/components/responses/200Success'

        '400':
          $ref: '#/components/responses/400Error'
  /problems/periode/{periode1}/{periode2}:
    parameters:
        - name: periode1
          in: path
          required: true
          description: The start periode to search, date in unix time
          schema:
            type: number
          example: 80394802938098
        - name: periode2
          in: path
          required: true
          description: The end periode to search, date in unix time
          schema:
            type: number
          example: 80394802938098
    get:
      summary: Get problems between two periode.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Problem'
        '400':
          $ref: '#/components/responses/400Error'
  /problems/active:
    get:
      summary: Get problems not finished.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Problem'
        '400':
          $ref: '#/components/responses/400Error'
  /problem/{id}:
    parameters:
        - name: id
          in: path
          required: true
          description: id of problem
          schema:
            type: string
          example: 'PRO2204509'
    get:
      summary: Get problems not finished.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Problem'
        '400':
          $ref: '#/components/responses/400Error'

components:
  schemas:
    Warehouse:
      type: object
      properties:
        id:
          type: string
          example: 'WAR22500001'
        warehouse_name:
          type: string
          example: 'warehouse001'
        warehouse_group:
          type: string
          example: 'warehouse001, warehouse002'
          nullable: true
        warehouse_supervisor:
          type: string
          example: 'spv001, spv002, spv003'
          nullable: true
    Supervisor:
      type: object
      properties:
        id:
          type: string
          example: 'SUP22500001'
        supervisor_name:
          type: string
          example: 'supervisor001'
        supervisor_phone:
          type: number
          example: 629283019283098123
          nullable: true
        supervisor_warehouse:
          type: string
          example: 'warehouse001'
          nullable: true
        disabled:
          type: boolean
          example: true
          nullable: false
    Problem:
      type: object
      properties:
        id:
          type: string
          example: 'PRO22500001'
        warehouse: 
          type: string
        supervisor: 
          type: string
        headspv: 
          type: string
        kode_item:
          type: string
        tanggal_mulai:
          type: number
        shift_mulai:
          type: number
        pic: 
          type: string
        dl: 
          type: number
        masalah:
          type: string
        sumberMasalah:
         type: string
        solusi:
          type: string
        solusi_panjang:
          type: string
        dl_panjang:
          type: string
        pic_panjang:
          type: string
        tanggal_selesai:
          type: number
        shift_selesai:
          type: number

  requestBodies:
    Warehouse:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                warehouse_name:
                  type: string
                warehouse_group:
                  type: string
                warehouse_supervisors:
                  type: string
    Supervisor:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                supervisor_name:
                  type: string
                supervisor_phone:
                  type: number
                supervisor_warehouse:
                  type: string
                disabled:
                  type: boolean
    Problem:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                warehouse: 
                  type: string

                supervisor: 
                  type: string

                headspv: 
                  type: string

                kode_item:
                  type: string
                  
                tanggal_mulai:
                  type: number

                shift_mulai:
                  type: number

                pic: 
                  type: string

                dl: 
                  type: number

                masalah:
                  type: string

                sumberMasalah:
                  type: string

                solusi:
                  type: string

                solusi_panjang:
                  type: string

                dl_panjang:
                  type: string
                  
                pic_panjang:
                  type: string

                tanggal_selesai:
                  type: number

                shift_selesai:
                  type: number


  responses:
    400Error:
      description: Invalid request
      content:
        application/json:
          schema:
            type: object 
            properties:
              message:
                type: string

    200Success:
      description: Success operation
      content:
        application/json:
          schema:
            type: object 
            properties:
              message:
                type: string